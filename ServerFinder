--// Services
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local LocalPlayer = Players.LocalPlayer

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local RunButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local JobInput = Instance.new("TextBox")
local JoinButton = Instance.new("TextButton")
local QuantumButton = Instance.new("TextButton")

ScreenGui.Name = "ServerFinder"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Position = UDim2.new(0.45, 0, 0.4, 0)
MainFrame.Size = UDim2.new(0, 200, 0, 180)
MainFrame.Active = true
MainFrame.Draggable = true

Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.Size = UDim2.new(1, 0, 0, 20)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Smart Server Finder"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14

RunButton.Name = "RunButton"
RunButton.Parent = MainFrame
RunButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
RunButton.Position = UDim2.new(0.1, 0, 0.2, 0)
RunButton.Size = UDim2.new(0.8, 0, 0, 22)
RunButton.Font = Enum.Font.SourceSansBold
RunButton.Text = "Smart Hop"
RunButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RunButton.TextSize = 14

JobInput.Name = "JobInput"
JobInput.Parent = MainFrame
JobInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
JobInput.Position = UDim2.new(0.1, 0, 0.4, 0)
JobInput.Size = UDim2.new(0.8, 0, 0, 20)
JobInput.Font = Enum.Font.SourceSans
JobInput.PlaceholderText = "Enter Job ID"
JobInput.Text = ""
JobInput.TextColor3 = Color3.fromRGB(255, 255, 255)
JobInput.TextSize = 12

JoinButton.Name = "JoinButton"
JoinButton.Parent = MainFrame
JoinButton.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
JoinButton.Position = UDim2.new(0.1, 0, 0.55, 0)
JoinButton.Size = UDim2.new(0.8, 0, 0, 22)
JoinButton.Font = Enum.Font.SourceSansBold
JoinButton.Text = "Join"
JoinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
JoinButton.TextSize = 14

QuantumButton.Name = "QuantumButton"
QuantumButton.Parent = MainFrame
QuantumButton.BackgroundColor3 = Color3.fromRGB(100, 0, 200)
QuantumButton.Position = UDim2.new(0.1, 0, 0.7, 0)
QuantumButton.Size = UDim2.new(0.8, 0, 0, 22)
QuantumButton.Font = Enum.Font.SourceSansBold
QuantumButton.Text = "Quantum"
QuantumButton.TextColor3 = Color3.fromRGB(255, 255, 255)
QuantumButton.TextSize = 14

CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseButton.Position = UDim2.new(1, -20, 0, 0)
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 12

--// Smart Server Hop Button
RunButton.MouseButton1Click:Connect(function()
	local placeId = game.PlaceId
	local player = Players.LocalPlayer

	local function findServers()
		local servers = {}
		local success, response = pcall(function()
			return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Asc&limit=100"))
		end)
		if success and response and response.data then
			for _, server in ipairs(response.data) do
				if server.playing < server.maxPlayers then
					table.insert(servers, server)
				end
			end
		end
		return servers
	end

	local function serverHop()
		local servers = findServers()
		if #servers > 0 then
			local randomServer = servers[math.random(1, #servers)]
			queue_on_teleport("loadstring(game:HttpGet('https://raw.githubusercontent.com/twobat602/wa/refs/heads/main/ServerFinder', true))()")
			TeleportService:TeleportToPlaceInstance(placeId, randomServer.id, player)
		else
			warn("Walang available na hindi full na server.")
		end
	end

	serverHop()
end)

--// Join by Job ID
JoinButton.MouseButton1Click:Connect(function()
	local jobId = JobInput.Text
	if jobId ~= "" then
		TeleportService:TeleportToPlaceInstance(game.PlaceId, jobId, LocalPlayer)
	end
end)

--// Quantum Button
QuantumButton.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/flazhy/QuantumOnyx/refs/heads/main/QuantumOnyx.lua"))()
end)

--// Close GUI
CloseButton.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

--// Persistent GUI on Server Hop
queue_on_teleport("loadstring(game:HttpGet('https://raw.githubusercontent.com/twobat602/wa/refs/heads/main/ServerFinder', true))()")
