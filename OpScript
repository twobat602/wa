--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local SeedButton = Instance.new("TextButton")
local GearButton = Instance.new("TextButton")
local AutoSeedButton = Instance.new("TextButton")
local AutoGearButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local MinimizeButton = Instance.new("TextButton") -- âž• Minimize button

ScreenGui.Name = "OPScript"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Position = UDim2.new(0.45, 0, 0.4, 0)
MainFrame.Size = UDim2.new(0, 220, 0, 160)
MainFrame.Active = true
MainFrame.Draggable = true

Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.Size = UDim2.new(1, 0, 0, 20)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "OPScript"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14

-- Seed Button
SeedButton.Name = "SeedButton"
SeedButton.Parent = MainFrame
SeedButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
SeedButton.Position = UDim2.new(0.05, 0, 0.2, 0)
SeedButton.Size = UDim2.new(0.42, 0, 0, 25)
SeedButton.Font = Enum.Font.SourceSansBold
SeedButton.Text = "Seed"
SeedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SeedButton.TextSize = 14

-- Gear Button
GearButton.Name = "GearButton"
GearButton.Parent = MainFrame
GearButton.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
GearButton.Position = UDim2.new(0.53, 0, 0.2, 0)
GearButton.Size = UDim2.new(0.42, 0, 0, 25)
GearButton.Font = Enum.Font.SourceSansBold
GearButton.Text = "Gear"
GearButton.TextColor3 = Color3.fromRGB(255, 255, 255)
GearButton.TextSize = 14

-- Auto Seed Toggle
AutoSeedButton.Name = "AutoSeedButton"
AutoSeedButton.Parent = MainFrame
AutoSeedButton.BackgroundColor3 = Color3.fromRGB(0, 85, 170)
AutoSeedButton.Position = UDim2.new(0.05, 0, 0.45, 0)
AutoSeedButton.Size = UDim2.new(0.42, 0, 0, 25)
AutoSeedButton.Font = Enum.Font.SourceSansBold
AutoSeedButton.Text = "Auto Seed: OFF"
AutoSeedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoSeedButton.TextSize = 12

-- Auto Gear Toggle
AutoGearButton.Name = "AutoGearButton"
AutoGearButton.Parent = MainFrame
AutoGearButton.BackgroundColor3 = Color3.fromRGB(0, 100, 80)
AutoGearButton.Position = UDim2.new(0.53, 0, 0.45, 0)
AutoGearButton.Size = UDim2.new(0.42, 0, 0, 25)
AutoGearButton.Font = Enum.Font.SourceSansBold
AutoGearButton.Text = "Auto Gear: OFF"
AutoGearButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoGearButton.TextSize = 12

-- Close Button
CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseButton.Position = UDim2.new(1, -20, 0, 0)
CloseButton.Size = UDim2.new(0, 20, 0, 20)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 12

-- Minimize Button
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
MinimizeButton.Position = UDim2.new(1, -40, 0, 0)
MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
MinimizeButton.Font = Enum.Font.SourceSansBold
MinimizeButton.Text = "-"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 12

--// Functions
local function fireSeed()
	local args = {
		[1] = "Claim";
		[2] = workspace:WaitForChild("Interaction", 9e9):WaitForChild("UpdateItems", 9e9):WaitForChild("NewCrafting", 9e9):WaitForChild("SeedEventCraftingWorkBench", 9e9);
		[3] = "SeedEventWorkbench";
		[4] = 1;
	}
	ReplicatedStorage:WaitForChild("GameEvents", 9e9):WaitForChild("CraftingGlobalObjectService", 9e9):FireServer(unpack(args))
end

local function fireGear()
	local args = {
		[1] = "Claim";
		[2] = workspace:WaitForChild("Interaction", 9e9):WaitForChild("UpdateItems", 9e9):WaitForChild("NewCrafting", 9e9):WaitForChild("EventCraftingWorkBench", 9e9);
		[3] = "GearEventWorkbench";
		[4] = 1;
	}
	ReplicatedStorage:WaitForChild("GameEvents", 9e9):WaitForChild("CraftingGlobalObjectService", 9e9):FireServer(unpack(args))
end

-- Manual Buttons
SeedButton.MouseButton1Click:Connect(fireSeed)
GearButton.MouseButton1Click:Connect(fireGear)

-- Toggles
local autoSeed = false
local autoGear = false

AutoSeedButton.MouseButton1Click:Connect(function()
	autoSeed = not autoSeed
	AutoSeedButton.Text = "Auto Seed: " .. (autoSeed and "ON" or "OFF")
end)

AutoGearButton.MouseButton1Click:Connect(function()
	autoGear = not autoGear
	AutoGearButton.Text = "Auto Gear: " .. (autoGear and "ON" or "OFF")
end)

-- Auto Loop
task.spawn(function()
	while true do
		if autoSeed then fireSeed() end
		if autoGear then fireGear() end
		task.wait(2.5)
	end
end)

-- Close GUI
CloseButton.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

-- Minimize Logic
local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
	minimized = not minimized
	for _, obj in ipairs(MainFrame:GetChildren()) do
		if obj:IsA("TextButton") and obj.Name ~= "CloseButton" and obj.Name ~= "MinimizeButton" then
			obj.Visible = not minimized
		end
		if obj:IsA("TextLabel") and obj.Name ~= "Title" then
			obj.Visible = not minimized
		end
	end
	if minimized then
		MainFrame.Size = UDim2.new(0, 220, 0, 25)
	else
		MainFrame.Size = UDim2.new(0, 220, 0, 160)
	end
end)
